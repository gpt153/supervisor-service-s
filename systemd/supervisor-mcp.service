[Unit]
Description=Supervisor MCP Server
Documentation=https://github.com/yourusername/supervisor-service
After=network.target postgresql.service
Wants=postgresql.service

[Service]
Type=simple
User=samuel
Group=samuel
WorkingDirectory=/home/samuel/sv/supervisor-service-s
Environment="NODE_ENV=production"
Environment="PORT=8081"
Environment="HOST=0.0.0.0"
EnvironmentFile=/home/samuel/sv/supervisor-service-s/.env

# Command to run the MCP daemon
ExecStart=/usr/bin/node --import tsx/esm /home/samuel/sv/supervisor-service-s/src/mcp/mcp-daemon.ts

# Restart configuration
Restart=always
RestartSec=5s
StartLimitBurst=5
StartLimitInterval=60s

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=supervisor-mcp

# Security hardening
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=read-only
ReadWritePaths=/home/samuel/sv
ReadWritePaths=/tmp

[Install]
WantedBy=multi-user.target
